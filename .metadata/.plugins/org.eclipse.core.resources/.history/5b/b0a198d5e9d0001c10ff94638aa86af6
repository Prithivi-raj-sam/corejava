package com.chainsys.reflection;

import java.lang.reflect.Constructor;
import java.lang.reflect.Field;
import java.lang.reflect.InvocationTargetException;
import java.lang.reflect.Method;
import java.lang.reflect.Modifier;

import com.chainsys.oops.testDemoA;
//import java.lang.reflect.Parameter;

public class ListClassMembers {
	public static void main(String[] args) {
		ListClassMembers t=new ListClassMembers();
//		t.testA();
		t.lateBinding();
	}
	public void lateBinding() {
		java.util.Scanner sc=new java.util.Scanner(System.in);
		try {			
			System.out.println("Enter Class Name");
			String className = sc.nextLine();
			// load the class -- A a1;
			Class<?> classReference1 = Class.forName(className);
			// create Object a1=new A();
			Object obj = classReference1.getDeclaredConstructor().newInstance();			
			System.out.println("Class Name " + obj.getClass().getName());
			System.out.println("Hash Code " + obj.hashCode());
			System.out.println("parent Class:"+classReference1.getSuperclass().getName());
//			System.out.println(classReference1.getCanonicalName());
			int mod=classReference1.getModifiers();
			System.out.println("is public :"+Modifier.isPublic(mod));
			System.out.println("is private :"+Modifier.isPrivate(mod));
			System.out.println("is protected :"+Modifier.isProtected(mod));
			System.out.println("is Abstract :"+Modifier.isAbstract(mod));
		} 
 catch (Exception e) {
			System.out.println("Exception: " + e);
		}
		finally
		{
			sc.close();
		}
	}
	public void earlyBinding() {
		Actor actorReference=new Actor();
		actorReference.Name="prithi";
		actorReference.city="madurai";
		actorReference.printName();
	}
	public void testB()
	  {
		 String classname="com.chainsys.reflection.Actor";
		 Class<?> actorclass = null;
		 try {
			actorclass=Class.forName(classname); // Actor actorclass=null;
		 } catch (ClassNotFoundException e1) 
		 {
			e1.printStackTrace();
		 } 
		 Object obj = null;
		 try {
			//obj=actorclass.newInstance(); // new Actor();
				obj = actorclass.getDeclaredConstructors()[0].newInstance();
			} catch (IllegalArgumentException e) {
				e.printStackTrace();
			} catch (ReflectiveOperationException e) {
				// TODO Auto-generated catch block
				e.printStackTrace();
			}  catch (SecurityException e) {
				// TODO Auto-generated catch block
				e.printStackTrace();
			} 
		 printClassInfo(obj);
		 
     }
	public static void printClassInfo(Object ob)
	  {
		  Class<?> classreflected= ob.getClass();
		 System.out.println(classreflected.getName());
		 System.out.println("Constructors:");
	     Constructor<?> constructorlist[] = classreflected.getConstructors();
	     for(int i = 0; i < constructorlist.length; i++)
	     {
	       System.out.println("\t" + constructorlist[i]);
	     }
	     //
	     System.out.println("Methods:");
	     Method methodlist[] = classreflected.getMethods();
	for(int i = 0; i < methodlist.length; i++)
	     {
	   	  methodlist[i].setAccessible(true);
	       System.out.println("\t Method Name: " + methodlist[i].getName()+
	       		" ParameterCount "+ methodlist[i].getParameterCount()+
	       		" returnType "+ methodlist[i].getReturnType());
	     }
	  }
	public void testA() {
		String s1="paithyam";
		printClassInfo(s1);
		Integer i1=9999;
		printClassInfo(i1);
		Emp e=new Emp();
		printClassInfo(e);
		Actor a=new Actor();
		printClassInfo(a);
		
	}
}